[
  {
    "objectID": "abandoned_wells.html",
    "href": "abandoned_wells.html",
    "title": "Abandoned wells data exploration",
    "section": "",
    "text": "This is an Exploratory Data Analysis to understand the data characteristics of the layer o16_WellsAbnd_HFI_2021 from the Wall-to-Wall Human Footprint Inventory by the Alberta Biodiversity Monitoring Institute.\nThe aim is to identify characteristics that may aid in selecting polygons for subsequent analysis.\nFor the findings summary, go to Key findings"
  },
  {
    "objectID": "abandoned_wells.html#unique-values-per-variable",
    "href": "abandoned_wells.html#unique-values-per-variable",
    "title": "Abandoned wells data exploration",
    "section": "Unique values per variable",
    "text": "Unique values per variable\nHow many unique values do we have per variable?\n\n\nCode\nabandoned_wells_df |&gt; \n        map_dfr(~n_distinct(.x)) |&gt; \n        paged_table()\n\n\n\n\n  \n\n\n\nInsights from the output:\n\nfootprint_id does not match the number of observations. Check if there are NA’s in polygons and why.\nwell_status we just have 1 which means abandoned.\nspud_date and spud_year are the date when drilling first began on the well pad. 125 different years in the registry? Check how many years of data we have.\nThe number_wellheads is the total number of wellbores on the well pad. Does this have an impact in the reclamation process?\nvisible variable probably have NA's. There should be just 3 values: 0 = not visible, 1 = fully visible, 2 = partially visible. This reflects the state of visibility of a footprint. No idea what this means.\noilsands_evaluation_well we have just the 2 categories described in documentation: 0 = No Oil Sands Evaluation (OSE) well, 1 = OSE well present.\nCheck distribution of variable reclamation_status.\nreclamation_date it’s the most recent reclamation certification."
  },
  {
    "objectID": "abandoned_wells.html#key-variable",
    "href": "abandoned_wells.html#key-variable",
    "title": "Abandoned wells data exploration",
    "section": "Key variable",
    "text": "Key variable\nWhat is each row? The dataset has 182189 observations that should match the same amount of unique values for one of the variables contained in the dataset. The variable closer to this number is footprint_id, but it has less number of unique values. What are they?\nAssuming that each row in the dataset is one unique site (or one unique observation), the wellsite_footprint_id should have one observation per each id.\nWhen grouping all the observations per wellsite_footprint_id, I found those id’s that have more than 1 observation as shown in Table 1.\n\n\nCode\nabandoned_wells_df |&gt; \n        group_by(wellsite_footprint_id) |&gt; \n        tally(sort = T) |&gt; \n        filter(n &gt; 1) |&gt; \n        gt()\n\n\n\n\n\n\nTable 1:  Well site id’s with more than 1 observation \n  \n    \n      wellsite_footprint_id\n      n\n    \n  \n  \n    NA\n1001\n    109118\n3\n    109503\n3\n    268598\n2\n    287438\n2\n    305376\n2\n    313410\n2\n    317515\n2\n    319334\n2\n    320068\n2\n    320225\n2\n    320312\n2\n    321608\n2\n    323037\n2\n    323334\n2\n    323467\n2\n    324441\n2\n    324474\n2\n    324597\n2\n    324936\n2\n    325167\n2\n    325895\n2\n    326530\n2\n    326601\n2\n    326972\n2\n    327070\n2\n    328678\n2\n    345923\n2\n  \n  \n  \n\n\n\n\n\nThe Table 2, shows every well site with more than 1 observation per id. In total, there are 56 well sites with this condition, excluding the observations with NAs. It seems to have the same values for each of its variables except for the shape_length and shape_area.\n\n\nCode\nrepeated_ids &lt;- abandoned_wells_df |&gt; \n        group_by(wellsite_footprint_id) |&gt; \n        tally() |&gt; \n        filter(n &gt; 1 & !is.na(wellsite_footprint_id)) |&gt; \n        select(wellsite_footprint_id) |&gt; \n        pull()\n\nabandoned_wells_df |&gt; \n        filter(wellsite_footprint_id %in% repeated_ids) |&gt; \n        arrange(wellsite_footprint_id) |&gt; \n        paged_table()\n\n\n\n\n Table 2:  Data frame subset of the well sites which have more than 1\nobservation per id \n  \n\n\n\n\nThe Figure 1 plots of the observations with the same id shows that probably, some well sites, are composed by more than 1 polygon. They look relatively close. This segmentation explains the differences in the shape_length and shape_area variables when the rest of the variables are the exact same per id\n\n\nCode\na &lt;- abandoned_wells |&gt; \n        filter(wellsite_footprint_id == 109118) |&gt; \n        ggplot() +\n        geom_sf() \n\nb &lt;- abandoned_wells |&gt; \n        filter(wellsite_footprint_id == 109503) |&gt; \n        ggplot() +\n        geom_sf()\n\nc &lt;- abandoned_wells |&gt; \n        filter(wellsite_footprint_id == 268598) |&gt; \n        ggplot() +\n        geom_sf()\n\nd &lt;- abandoned_wells |&gt; \n        filter(wellsite_footprint_id == 287438) |&gt; \n        ggplot() +\n        geom_sf()\n\nplot_grid(a, b, c, d, labels = c('A', 'B', 'C', 'D'))\n\n\n\n\n\nFigure 1: Polygons with the same well site id\n\n\n\n\n\nWhat is happening with the NA’s in id?\nThere are 1001 observations which have NA in the wellsite_footprint_id variable. The Figure 2 shows that together with the wellsite_footprint_id, the disp_num, lcu_id, and the vast majority of fieldname observations are also NAs.\n\n\nCode\nabandoned_wells_df |&gt; \n        filter(is.na(wellsite_footprint_id) == TRUE) |&gt; \n        vis_dat(sort_type = F)\n\n\n\n\n\nFigure 2: Observations with NA in the well site id variable\n\n\n\n\nPolygons with NA’s in their ids seems to be fine (not segmented or empty). The Figure 3 shows two of them.\n\n\nCode\na &lt;- abandoned_wells |&gt; \n        filter(is.na(wellsite_footprint_id) == TRUE) |&gt; \n        slice(34) |&gt; \n        ggplot() +\n        geom_sf() \n\nb &lt;- abandoned_wells |&gt; \n        filter(is.na(wellsite_footprint_id) == TRUE) |&gt; \n        slice(534) |&gt; \n        ggplot() +\n        geom_sf() \n\nplot_grid(a, b, labels = c('A', 'B'))\n\n\n\n\n\nFigure 3: Polygons with NAs in their ids\n\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nThere are 27 “segmented polygons” which are represented by the same id. Also we have 1001 NA’s in the well site ids, which have at the same time NAs in disp_num, lcu_id, and fieldname\nShould we exclude the 56 segmented polygons? Do we want to use polygons without any id?"
  },
  {
    "objectID": "abandoned_wells.html#character-variables",
    "href": "abandoned_wells.html#character-variables",
    "title": "Abandoned wells data exploration",
    "section": "Character variables",
    "text": "Character variables\nWe have just 6 character variables. Nonetheless, I should take into account that other variables with categories are encoded with numbers and I should check the ABMI data document to understand the meaning. The table ?@tbl-character_variables\n\n\nCode\nabandoned_wells_df |&gt; \n        select_if(is.character) |&gt; \n        glimpse() \n\n\n\n?(caption)\n\n\n\nRows: 182,189\nColumns: 6\n$ disp_num   &lt;chr&gt; \"MSL974346\", NA, NA, \"MSL920658\", NA, NA, NA, NA, NA, NA, N…\n$ lcu_id     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ fieldname  &lt;chr&gt; NA, \"ATHABASCA Oil Sands\", \"ATHABASCA Oil Sands\", NA, \"ATHA…\n$ feature_ty &lt;chr&gt; \"WELL-ABAND\", \"WELL-ABAND\", \"WELL-ABAND\", \"WELL-ABAND\", \"WE…\n$ source     &lt;chr&gt; \"AHFMP\", \"AHFMP\", \"AHFMP\", \"AHFMP\", \"AHFMP\", \"AHFMP\", \"AHFM…\n$ hfi_id     &lt;chr&gt; \"{4F2CC0D4-6909-433C-A609-2F7AD77AEDA0}\", \"{018C1ECA-EF3A-4…\n\n\n\n\nCheck unique values per character variable:\n\n\nCode\n# Check number of distinct observations\nabandoned_wells_df |&gt; \n        select_if(is.character) |&gt; \n        map(~n_distinct(.x))\n\n\n$disp_num\n[1] 36124\n\n$lcu_id\n[1] 1050\n\n$fieldname\n[1] 4\n\n$feature_ty\n[1] 1\n\n$source\n[1] 4\n\n$hfi_id\n[1] 182142\n\n\nCode\n# Check categories \nabandoned_wells_df |&gt; \n        select_if(is.character) |&gt; \n        select(-hfi_id, -disp_num, -lcu_id) |&gt;\n        map(~unique(.x))\n\n\n$fieldname\n[1] NA                      \"ATHABASCA Oil Sands\"   \"COLD LAKE Oil Sands\"  \n[4] \"PEACE RIVER Oil Sands\"\n\n$feature_ty\n[1] \"WELL-ABAND\"\n\n$source\n[1] \"AHFMP\"  \"ABMI21\" \"ABMI19\" \"ABMI\"  \n\n\n\n\nCode\n# abandoned_wells_df |&gt; \n#         vis_dat(warn_large_data = FALSE)\n\n\n\n\n\n\n\n\nNote\n\n\n\nEverything seems fine with the character variables. Not much information seems to be useful for the analysis.\nThere is just the category abandoned, 3 fieldnames and 4 data sources"
  },
  {
    "objectID": "abandoned_wells.html#number-of-observations-with-minimun-amount-of-years-from-reclamation-year",
    "href": "abandoned_wells.html#number-of-observations-with-minimun-amount-of-years-from-reclamation-year",
    "title": "Abandoned wells data exploration",
    "section": "Number of observations with minimun amount of years from reclamation year",
    "text": "Number of observations with minimun amount of years from reclamation year\nWe need to obtain polygons with a sufficient time range from the last reclamation year to include in the analysis. The following interactive plot helps to explore the number of observations that we have if we select the number of years since the last reclamation certification was issued.\n\n\nCode\n# Create interactive plot that shows number of observations with at least\n# 20 years or X since last year of reclamation\n\nat_least_20 &lt;- abandoned_wells_df |&gt; \n        group_by(reclamation_date) |&gt; \n        tally() |&gt; \n        filter(reclamation_date != 0) |&gt; \n        mutate(years = max(abandoned_wells_df$reclamation_date) -\n                       reclamation_date) |&gt; \n        filter(years &gt;= 20) |&gt; \n        select(n) |&gt; \n        pull() |&gt; \n        sum()\n\n\nThe number of polygons with at least 20 years are 43579\n\n\nThis is looking just at the reclamation year, without filtering by any other variable. Therefore, number of observations could be lower due to other filtering criteria based on variables other than reclamation maximum year."
  },
  {
    "objectID": "abandoned_wells.html#reclamation-date-vs-abandoned-date",
    "href": "abandoned_wells.html#reclamation-date-vs-abandoned-date",
    "title": "Abandoned wells data exploration",
    "section": "Reclamation date vs Abandoned date",
    "text": "Reclamation date vs Abandoned date\n\n\nCode\ncat &lt;- abandoned_wells_df |&gt; \n        filter(reclamation_date != 0 & max_abandoned_date != 0) |&gt; \n        mutate(diff = reclamation_date - max_abandoned_date) |&gt; \n        select(diff, reclamation_date, max_abandoned_date) |&gt; \n        # arrange(desc(diff))\n        # paged_table()\n        group_by(diff) |&gt; \n        tally() |&gt; \n        mutate(cat = case_when(\n                diff &lt; 0 ~ \"less\",\n                diff &gt; 0 ~ \"more\",\n                diff == 0 ~ \"same\",\n                .default = NA\n        )) |&gt; \n        group_by(cat) |&gt; \n        summarize(\n                total = sum(n)\n        )\n\n\nDoes the reclamation date has to match with abandoned date? In the data set, excluding observations with dates equal to 0, there are 2066 polygons where the abandoned date is more recent than reclamation date, 84460 where the reclamation date is more recent than the abandoned date, and 5118 with both dates being the same.\nThe interactive Figure 4 shows the difference in years distribution of these dates. The differences indicate:\n\n0 = Same year abandoned date reclamation.\n&gt; 0 = Date reclamation is more recent than the abandoned date.\n&lt; 0 = Abandoned date is more recent than reclamation date.\n\n\n\nCode\na &lt;- abandoned_wells_df |&gt; \n        filter(reclamation_date != 0 & max_abandoned_date != 0) |&gt; \n        mutate(diff = reclamation_date - max_abandoned_date) |&gt; \n        select(diff, reclamation_date, max_abandoned_date) |&gt; \n        # arrange(desc(diff))\n        # paged_table()\n        group_by(diff) |&gt; \n        tally() |&gt; \n        # paged_table()\n        ggplot(aes(x = diff, y = n)) +\n        geom_col() +\n        theme_light()\n\nggplotly(a)\n\n\n\n\n\nFigure 4: Distribution of difference in years between reclamation and abandoned dates"
  },
  {
    "objectID": "abandoned_wells.html#reclamation-date-vs-last-production-date",
    "href": "abandoned_wells.html#reclamation-date-vs-last-production-date",
    "title": "Abandoned wells data exploration",
    "section": "Reclamation date vs Last Production date",
    "text": "Reclamation date vs Last Production date\n\n\nCode\ncat &lt;- abandoned_wells_df |&gt; \n        filter(reclamation_date != 0 & max_last_production_date != 0) |&gt; \n        mutate(diff = reclamation_date - max_last_production_date) |&gt; \n        select(diff, reclamation_date, max_last_production_date) |&gt; \n        # arrange(desc(diff))\n        # paged_table()\n        group_by(diff) |&gt; \n        tally() |&gt; \n        mutate(cat = case_when(\n                diff &lt; 0 ~ \"less\",\n                diff &gt; 0 ~ \"more\",\n                diff == 0 ~ \"same\",\n                .default = NA\n        )) |&gt; \n        group_by(cat) |&gt; \n        summarize(\n                total = sum(n)\n        )\n\n\nHere I have the same question: Does the reclamation date has to match with the last production date? Given that we need polygons with no buildings or infrastructure on it to avoid anomalies in the spectral signature, does the period of production implies that there is some sort of infrastructure in the well area?\nIn this case, excluding observations with dates equal to 0, there are 1111 polygons where the production date is more recent than reclamation date, 18769 where the reclamation date is more recent than the production date, and 133 with both dates being the same.\n\n\n\n\n\n\nImportant\n\n\n\nDo we need to consider last production dates and abandoned dates to be earlier than the last reclamation date?"
  }
]